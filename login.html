document.addEventListener("DOMContentLoaded", function () {

    // ===== Vérification bouton =====
    const loginButton = document.getElementById("connecterButton");

    if (!loginButton) {
        console.error("ERREUR : bouton 'connecterButton' introuvable.");
        return;
    }

    // ===== Création du modal dynamiquement =====
    const modal = document.createElement("div");
    modal.id = "loginModal";
    modal.style.position = "fixed";
    modal.style.top = "0";
    modal.style.left = "0";
    modal.style.width = "100%";
    modal.style.height = "100%";
    modal.style.backgroundColor = "rgba(0,0,0,0.5)";
    modal.style.display = "none";
    modal.style.zIndex = "9999";

    modal.innerHTML = `
        <div style="
            background:white;
            width:360px;
            margin:10% auto;
            padding:20px;
            border-radius:8px;
            text-align:center;
            position:relative;
        ">
            <span id="closeLogin" style="
                position:absolute;
                right:10px;
                top:5px;
                font-size:22px;
                cursor:pointer;
            ">&times;</span>

            <h2>Connexion</h2>

            <input type="text" id="loginName" placeholder="Nom"
                style="width:90%;padding:8px;margin:8px 0;"><br>

            <input type="password" id="loginPassword" placeholder="Mot de passe provisoire"
                style="width:90%;padding:8px;margin:8px 0;"><br>

            <button id="loginValidate"
                style="padding:8px 15px;margin-top:10px;">
                Valider
            </button>

            <hr style="margin:20px 0;">

            <button id="openReset"
                style="padding:6px 12px;">
                Modifier mot de passe
            </button>
        </div>
    `;

    document.body.appendChild(modal);

    // ===== Ouverture modal =====
    loginButton.addEventListener("click", function () {
        modal.style.display = "block";
    });

    // ===== Fermeture =====
    document.getElementById("closeLogin").addEventListener("click", function () {
        modal.style.display = "none";
    });

    window.addEventListener("click", function (e) {
        if (e.target === modal) {
            modal.style.display = "none";
        }
    });

    // ===== Simulation login =====
    document.getElementById("loginValidate").addEventListener("click", function () {
        const name = document.getElementById("loginName").value;
        const pass = document.getElementById("loginPassword").value;

        if (name === "" || pass === "") {
            alert("Champs manquants.");
            return;
        }

        alert("Connexion simulée OK.");
        modal.style.display = "none";
    });

});
